### ===================================
### IA - Inteligência Artificial
### ===================================
### INSTRUÇÕES:
### 1. Execute o LOGIN primeiro
### 2. Copie o token da resposta
### 3. Cole no arquivo http-client.env.json no campo "iaToken"
### 4. Execute as outras requisições
### ===================================

@baseUrl = {{baseUrl}}
@token = {{iaToken}}

###############################################
### 1. AUTENTICAÇÃO
###############################################

### Login como IA
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "team": "IA",
  "secret": "ia-secret"
}

###

### Verificar meu perfil
GET {{baseUrl}}/auth/me
Authorization: Bearer {{token}}

###############################################
### 2. INGESTÃO DE MÉTRICAS (IA)
###############################################

### Enviar métrica: acurácia do modelo
POST {{baseUrl}}/otel/v1/metrics
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:50:00Z",
  "payloadJson": "{\"metric\":\"model_accuracy\",\"value\":0.95,\"model\":\"v2.1\",\"dataset\":\"test\"}"
}

###

### Enviar métrica: tempo de inferência
POST {{baseUrl}}/otel/v1/metrics
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:51:00Z",
  "payloadJson": "{\"metric\":\"inference_time_ms\",\"value\":125,\"model\":\"v2.1\",\"endpoint\":\"/predict\"}"
}

###

### Enviar métrica: uso de CPU
POST {{baseUrl}}/otel/v1/metrics
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:52:00Z",
  "payloadJson": "{\"metric\":\"cpu_usage_percent\",\"value\":78.5,\"container\":\"ml-worker-1\"}"
}

###

### Enviar métrica: uso de memória
POST {{baseUrl}}/otel/v1/metrics
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:53:00Z",
  "payloadJson": "{\"metric\":\"memory_usage_mb\",\"value\":2048,\"container\":\"ml-worker-1\"}"
}

###

### Enviar métrica: número de predições
POST {{baseUrl}}/otel/v1/metrics
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:54:00Z",
  "payloadJson": "{\"metric\":\"predictions_count\",\"value\":1543,\"model\":\"v2.1\",\"period\":\"1h\"}"
}

###############################################
### 3. INGESTÃO DE TRACES (IA)
###############################################

### Enviar trace: operação de predição
POST {{baseUrl}}/otel/v1/traces
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:55:00Z",
  "payloadJson": "{\"traceId\":\"abc123-def456\",\"spanId\":\"span-001\",\"operation\":\"predict\",\"duration_ms\":120}"
}

###

### Enviar trace: carregamento do modelo
POST {{baseUrl}}/otel/v1/traces
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:56:00Z",
  "payloadJson": "{\"traceId\":\"abc123-def456\",\"spanId\":\"span-002\",\"operation\":\"load_model\",\"duration_ms\":350}"
}

###############################################
### 4. INGESTÃO DE LOGS (IA)
###############################################

### Enviar log: modelo carregado com sucesso
POST {{baseUrl}}/otel/v1/logs
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:57:00Z",
  "payloadJson": "{\"level\":\"INFO\",\"message\":\"Model v2.1 loaded successfully\",\"module\":\"model_loader\"}"
}

###

### Enviar log: erro de predição
POST {{baseUrl}}/otel/v1/logs
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "timestamp": "2025-11-19T21:58:00Z",
  "payloadJson": "{\"level\":\"ERROR\",\"message\":\"Prediction failed: invalid input\",\"module\":\"predictor\",\"error_code\":\"E001\"}"
}

###############################################
### 5. CONSULTA DE MÉTRICAS (IA - vê só suas)
###############################################

### Consultar minhas métricas (paginado)
GET {{baseUrl}}/export/metrics?page=0&size=10
Authorization: Bearer {{token}}

###

### Consultar métricas com ordenação por timestamp (mais recentes)
GET {{baseUrl}}/export/metrics?page=0&size=10&sort=timestamp,desc
Authorization: Bearer {{token}}

###

### Consultar traces
GET {{baseUrl}}/export/traces?page=0&size=10
Authorization: Bearer {{token}}

###

### Consultar logs
GET {{baseUrl}}/export/logs?page=0&size=10
Authorization: Bearer {{token}}

###############################################
### 6. GESTÃO DE ALERTAS (IA)
###############################################

### Criar alerta: drift detectado
POST {{baseUrl}}/alerts
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "type": "DRIFT",
  "message": "Drift detectado no modelo v2.1 - acurácia caiu de 0.95 para 0.75"
}

###

### Criar alerta: erro no modelo
POST {{baseUrl}}/alerts
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "type": "MODEL_ERROR",
  "message": "Modelo v2.1 falhou ao processar 15% das requisições na última hora"
}

###

### Criar alerta: serviço fora do ar
POST {{baseUrl}}/alerts
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "teamTag": "IA",
  "type": "SERVICE_DOWN",
  "message": "Serviço de inferência não respondeu nos últimos 5 minutos"
}

###

### Listar todos os alertas da equipe IA
GET {{baseUrl}}/alerts?page=0&size=20
Authorization: Bearer {{token}}

###

### Listar alertas não resolvidos
GET {{baseUrl}}/alerts?resolved=false&page=0&size=20
Authorization: Bearer {{token}}

###

### Resolver alerta (substitua ID)
PUT {{baseUrl}}/alerts/1/resolve
Authorization: Bearer {{token}}

###############################################
### 7. HEALTH CHECKS
###############################################

### Health check da aplicação
GET {{baseUrl}}/actuator/health

###

### Informações da aplicação
GET {{baseUrl}}/actuator/info

